"""Module to create the svg charts"""
import pygal

# Temp data
TEST_JSON = {u'hourly': {u'icon': u'clear-day', u'data': [{u'ozone': 319.24, u'temperature': 49.96, u'icon': u'clear-day', u'dewPoint': 43.2, u'humidity': 0.77, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 48.98, u'pressure': 1026.29, u'windSpeed': 3.79, u'cloudCover': 0.17, u'time': 1424026800, u'windBearing': 35, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.94, u'temperature': 54.02, u'icon': u'clear-day', u'dewPoint': 42.22, u'humidity': 0.64, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 54.02, u'pressure': 1025.48, u'windSpeed': 5.71, u'cloudCover': 0.22, u'time': 1424030400, u'windBearing': 52, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.76, u'temperature': 56, u'icon': u'partly-cloudy-day', u'dewPoint': 41.64, u'humidity': 0.58, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 56, u'pressure': 1024.73, u'windSpeed': 6.16, u'cloudCover': 0.26, u'time': 1424034000, u'windBearing': 55, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.77, u'temperature': 57.58, u'icon': u'clear-day', u'dewPoint': 41.69, u'humidity': 0.55, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 57.58, u'pressure': 1023.96, u'windSpeed': 7.1, u'cloudCover': 0.24, u'time': 1424037600, u'windBearing': 59, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.89, u'temperature': 58.3, u'icon': u'clear-day', u'dewPoint': 42.51, u'humidity': 0.56, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 58.3, u'pressure': 1023.21, u'windSpeed': 7.33, u'cloudCover': 0.18, u'time': 1424041200, u'windBearing': 60, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.91, u'temperature': 57.91, u'icon': u'clear-day', u'dewPoint': 43.09, u'humidity': 0.58, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 57.91, u'pressure': 1022.75, u'windSpeed': 6.5, u'cloudCover': 0.09, u'time': 1424044800, u'windBearing': 53, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.68, u'temperature': 55.69, u'icon': u'clear-day', u'dewPoint': 42.54, u'humidity': 0.61, u'visibility': 9.94, u'summary': u'Clear', u'apparentTemperature': 55.69, u'pressure': 1022.74, u'windSpeed': 6.69, u'cloudCover': 0.13, u'time': 1424048400, u'windBearing': 53, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.34, u'temperature': 52.56, u'icon': u'clear-night', u'dewPoint': 40.98, u'humidity': 0.65, u'visibility': 9.77, u'summary': u'Clear', u'apparentTemperature': 52.56, u'pressure': 1023.01, u'windSpeed': 6.74, u'cloudCover': 0.21, u'time': 1424052000, u'windBearing': 52, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 318.03, u'temperature': 50.21, u'icon': u'partly-cloudy-night', u'dewPoint': 39.58, u'humidity': 0.67, u'visibility': 9.83, u'summary': u'Partly Cloudy', u'apparentTemperature': 50.21, u'pressure': 1023.28, u'windSpeed': 6.73, u'cloudCover': 0.25, u'time': 1424055600, u'windBearing': 51, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 317.79, u'temperature': 48.64, u'icon': u'clear-night', u'dewPoint': 38.85, u'humidity': 0.69, u'visibility': 9.89, u'summary': u'Clear', u'apparentTemperature': 45.63, u'pressure': 1023.48, u'windSpeed': 6.83, u'cloudCover': 0.24, u'time': 1424059200, u'windBearing': 51, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 317.58, u'temperature': 47.59, u'icon': u'clear-night', u'dewPoint': 37.72, u'humidity': 0.68, u'visibility': 9.97, u'summary': u'Clear', u'apparentTemperature': 44.37, u'pressure': 1023.67, u'windSpeed': 6.81, u'cloudCover': 0.22, u'time': 1424062800, u'windBearing': 54, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 317.41, u'temperature': 46.55, u'icon': u'clear-night', u'dewPoint': 36.76, u'humidity': 0.69, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 43.39, u'pressure': 1023.76, u'windSpeed': 6.31, u'cloudCover': 0.16, u'time': 1424066400, u'windBearing': 54, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 317.33, u'temperature': 45.87, u'icon': u'clear-night', u'dewPoint': 36.01, u'humidity': 0.68, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 42.64, u'pressure': 1023.72, u'windSpeed': 6.18, u'cloudCover': 0.13, u'time': 1424070000, u'windBearing': 55, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 317.3, u'temperature': 45.02, u'icon': u'clear-night', u'dewPoint': 34.89, u'humidity': 0.67, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 41.62, u'pressure': 1023.59, u'windSpeed': 6.19, u'cloudCover': 0.1, u'time': 1424073600, u'windBearing': 58, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 317.25, u'temperature': 44.47, u'icon': u'clear-night', u'dewPoint': 34.31, u'humidity': 0.67, u'visibility': 9.3, u'summary': u'Clear', u'apparentTemperature': 40.97, u'pressure': 1023.5, u'windSpeed': 6.19, u'cloudCover': 0.06, u'time': 1424077200, u'windBearing': 60, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 317.13, u'temperature': 43.85, u'icon': u'clear-night', u'dewPoint': 33.43, u'humidity': 0.66, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 40.32, u'pressure': 1023.48, u'windSpeed': 6.04, u'cloudCover': 0.1, u'time': 1424080800, u'windBearing': 60, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.99, u'temperature': 43.34, u'icon': u'clear-night', u'dewPoint': 32.86, u'humidity': 0.66, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 39.67, u'pressure': 1023.5, u'windSpeed': 6.11, u'cloudCover': 0.07, u'time': 1424084400, u'windBearing': 61, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.85, u'temperature': 42.7, u'icon': u'clear-night', u'dewPoint': 32.93, u'humidity': 0.68, u'visibility': 8.25, u'summary': u'Clear', u'apparentTemperature': 38.54, u'pressure': 1023.55, u'windSpeed': 6.72, u'cloudCover': 0.12, u'time': 1424088000, u'windBearing': 66, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.68, u'temperature': 41.99, u'icon': u'clear-night', u'dewPoint': 32.44, u'humidity': 0.69, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 37.22, u'pressure': 1023.64, u'windSpeed': 7.58, u'cloudCover': 0.12, u'time': 1424091600, u'windBearing': 71, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.5, u'temperature': 41.38, u'icon': u'clear-night', u'dewPoint': 32.13, u'humidity': 0.69, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 36.02, u'pressure': 1023.77, u'windSpeed': 8.53, u'cloudCover': 0.14, u'time': 1424095200, u'windBearing': 76, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.38, u'temperature': 41.55, u'icon': u'clear-night', u'dewPoint': 32.04, u'humidity': 0.69, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 35.81, u'pressure': 1023.9, u'windSpeed': 9.42, u'cloudCover': 0.16, u'time': 1424098800, u'windBearing': 79, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.41, u'temperature': 43.01, u'icon': u'clear-day', u'dewPoint': 32.71, u'humidity': 0.67, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 36.93, u'pressure': 1024.08, u'windSpeed': 11.16, u'cloudCover': 0.14, u'time': 1424102400, u'windBearing': 84, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.49, u'temperature': 45.61, u'icon': u'clear-day', u'dewPoint': 33.77, u'humidity': 0.63, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 39.87, u'pressure': 1024.3, u'windSpeed': 12.07, u'cloudCover': 0.12, u'time': 1424106000, u'windBearing': 86, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 316.35, u'temperature': 48.05, u'icon': u'clear-day', u'dewPoint': 34.58, u'humidity': 0.59, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 42.75, u'pressure': 1024.41, u'windSpeed': 12.77, u'cloudCover': 0.08, u'time': 1424109600, u'windBearing': 87, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 315.87, u'temperature': 50.64, u'icon': u'clear-day', u'dewPoint': 34.67, u'humidity': 0.54, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 50.64, u'pressure': 1024.27, u'windSpeed': 13.14, u'cloudCover': 0.08, u'time': 1424113200, u'windBearing': 89, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 315.17, u'temperature': 53.26, u'icon': u'clear-day', u'dewPoint': 35.59, u'humidity': 0.51, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 53.26, u'pressure': 1023.98, u'windSpeed': 13.31, u'cloudCover': 0.1, u'time': 1424116800, u'windBearing': 90, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 314.3, u'temperature': 55.29, u'icon': u'clear-day', u'dewPoint': 36.11, u'humidity': 0.48, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 55.29, u'pressure': 1023.65, u'windSpeed': 13.35, u'cloudCover': 0.13, u'time': 1424120400, u'windBearing': 90, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 313.18, u'temperature': 55.95, u'icon': u'clear-day', u'dewPoint': 36.52, u'humidity': 0.48, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 55.95, u'pressure': 1023.26, u'windSpeed': 13.27, u'cloudCover': 0.13, u'time': 1424124000, u'windBearing': 88, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 311.88, u'temperature': 55.58, u'icon': u'clear-day', u'dewPoint': 36.95, u'humidity': 0.49, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 55.58, u'pressure': 1022.84, u'windSpeed': 13.09, u'cloudCover': 0.13, u'time': 1424127600, u'windBearing': 86, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 310.66, u'temperature': 55.42, u'icon': u'clear-day', u'dewPoint': 37.7, u'humidity': 0.51, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 55.42, u'pressure': 1022.64, u'windSpeed': 12.91, u'cloudCover': 0.14, u'time': 1424131200, u'windBearing': 84, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 309.54, u'temperature': 53.38, u'icon': u'clear-day', u'dewPoint': 36.72, u'humidity': 0.53, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 53.38, u'pressure': 1022.79, u'windSpeed': 12.69, u'cloudCover': 0.13, u'time': 1424134800, u'windBearing': 84, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 308.5, u'temperature': 50.58, u'icon': u'clear-night', u'dewPoint': 35.05, u'humidity': 0.55, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 50.58, u'pressure': 1023.15, u'windSpeed': 12.44, u'cloudCover': 0.12, u'time': 1424138400, u'windBearing': 85, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 307.8, u'temperature': 48.19, u'icon': u'clear-night', u'dewPoint': 33.61, u'humidity': 0.57, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 43.08, u'pressure': 1023.46, u'windSpeed': 12.22, u'cloudCover': 0.13, u'time': 1424142000, u'windBearing': 87, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 307.77, u'temperature': 46.79, u'icon': u'clear-night', u'dewPoint': 32.87, u'humidity': 0.58, u'visibility': 10, u'summary': u'Clear', u'apparentTemperature': 41.35, u'pressure': 1023.63, u'windSpeed': 12.1, u'cloudCover': 0.2, u'time': 1424145600, u'windBearing': 89, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 308.09, u'temperature': 45.88, u'icon': u'partly-cloudy-night', u'dewPoint': 32.47, u'humidity': 0.59, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 40.23, u'pressure': 1023.73, u'windSpeed': 12.04, u'cloudCover': 0.3, u'time': 1424149200, u'windBearing': 91, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 308.06, u'temperature': 45.23, u'icon': u'partly-cloudy-night', u'dewPoint': 32.22, u'humidity': 0.6, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 39.45, u'pressure': 1023.73, u'windSpeed': 11.94, u'cloudCover': 0.37, u'time': 1424152800, u'windBearing': 93, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 307.34, u'temperature': 44.63, u'icon': u'partly-cloudy-night', u'dewPoint': 31.95, u'humidity': 0.61, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 38.77, u'pressure': 1023.55, u'windSpeed': 11.7, u'cloudCover': 0.37, u'time': 1424156400, u'windBearing': 93, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 306.28, u'temperature': 44.14, u'icon': u'partly-cloudy-night', u'dewPoint': 31.72, u'humidity': 0.61, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 38.26, u'pressure': 1023.31, u'windSpeed': 11.4, u'cloudCover': 0.34, u'time': 1424160000, u'windBearing': 92, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 305.24, u'temperature': 43.67, u'icon': u'partly-cloudy-night', u'dewPoint': 31.57, u'humidity': 0.62, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 37.76, u'pressure': 1023.1, u'windSpeed': 11.15, u'cloudCover': 0.32, u'time': 1424163600, u'windBearing': 91, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 304.37, u'temperature': 43.2, u'icon': u'partly-cloudy-night', u'dewPoint': 31.56, u'humidity': 0.63, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 37.21, u'pressure': 1022.97, u'windSpeed': 11.03, u'cloudCover': 0.34, u'time': 1424167200, u'windBearing': 90, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 303.53, u'temperature': 42.72, u'icon': u'partly-cloudy-night', u'dewPoint': 31.6, u'humidity': 0.65, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 36.65, u'pressure': 1022.87, u'windSpeed': 10.94, u'cloudCover': 0.38, u'time': 1424170800, u'windBearing': 89, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 302.64, u'temperature': 42.19, u'icon': u'partly-cloudy-night', u'dewPoint': 31.51, u'humidity': 0.66, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 36.05, u'pressure': 1022.79, u'windSpeed': 10.78, u'cloudCover': 0.42, u'time': 1424174400, u'windBearing': 88, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 301.54, u'temperature': 41.08, u'icon': u'partly-cloudy-night', u'dewPoint': 30.88, u'humidity': 0.67, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 34.77, u'pressure': 1022.75, u'windSpeed': 10.51, u'cloudCover': 0.43, u'time': 1424178000, u'windBearing': 87, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 300.39, u'temperature': 40.09, u'icon': u'partly-cloudy-night', u'dewPoint': 30.25, u'humidity': 0.68, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 33.67, u'pressure': 1022.72, u'windSpeed': 10.2, u'cloudCover': 0.42, u'time': 1424181600, u'windBearing': 87, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 299.54, u'temperature': 40.45, u'icon': u'partly-cloudy-night', u'dewPoint': 30.38, u'humidity': 0.67, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 34.2, u'pressure': 1022.66, u'windSpeed': 10.01, u'cloudCover': 0.42, u'time': 1424185200, u'windBearing': 88, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 299.17, u'temperature': 42.16, u'icon': u'partly-cloudy-day', u'dewPoint': 30.88, u'humidity': 0.64, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 36.3, u'pressure': 1022.56, u'windSpeed': 10.06, u'cloudCover': 0.45, u'time': 1424188800, u'windBearing': 89, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 299.1, u'temperature': 44.87, u'icon': u'partly-cloudy-day', u'dewPoint': 31.62, u'humidity': 0.59, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 39.59, u'pressure': 1022.44, u'windSpeed': 10.23, u'cloudCover': 0.49, u'time': 1424192400, u'windBearing': 90, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 299.13, u'temperature': 48.09, u'icon': u'partly-cloudy-day', u'dewPoint': 32.88, u'humidity': 0.55, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 43.56, u'pressure': 1022.24, u'windSpeed': 10.32, u'cloudCover': 0.49, u'time': 1424196000, u'windBearing': 92, u'precipIntensity': 0, u'precipProbability': 0}, {u'ozone': 299.2, u'temperature': 51.08, u'icon': u'partly-cloudy-day', u'dewPoint': 33.99, u'humidity': 0.52, u'visibility': 10, u'summary': u'Partly Cloudy', u'apparentTemperature': 51.08, u'pressure': 1021.91, u'windSpeed': 10.34, u'cloudCover': 0.42, u'time': 1424199600, u'windBearing': 93, u'precipIntensity': 0, u'precipProbability': 0}], u'summary': u'Clear throughout the day.'}, u'currently': {u'ozone': 319.18, u'temperature': 50.74, u'dewPoint': 43.09, u'nearestStormDistance': 403, u'cloudCover': 0.18, u'humidity': 0.75, u'nearestStormBearing': 83, u'summary': u'Clear', u'apparentTemperature': 50.74, u'pressure': 1026.13, u'windSpeed': 4.12, u'precipProbability': 0, u'visibility': 10, u'time': 1424027491, u'windBearing': 40, u'precipIntensity': 0, u'icon': u'clear-day'}, u'longitude': -122.681944, u'flags': {u'lamp-stations': [u'KHIO', u'KMMV', u'KPDX', u'KSPB', u'KTTD', u'KUAO', u'KVUO'], u'sources': [u'nwspa', u'isd', u'nearest-precip', u'rtma', u'darksky', u'fnmoc', u'sref', u'rap', u'nam', u'cmc', u'gfs', u'madis', u'lamp'], u'units': u'us', u'madis-stations': [u'AU774', u'C7021', u'D3557', u'D3762', u'D4360', u'D7321', u'D9191', u'D9370', u'E1617', u'E1914', u'E2024', u'E2298', u'E4831', u'OD103', u'ODT10', u'ODT12'], u'darksky-stations': [u'KRTX'], u'isd-stations': [u'726980-24229', u'727918-94298', u'727918-99999', u'999999-24229', u'999999-24274']}, u'daily': {u'icon': u'clear-day', u'data': [{u'apparentTemperatureMinTime': 1424012400, u'cloudCover': 0.26, u'temperatureMin': 39.94, u'summary': u'Partly cloudy in the morning.', u'dewPoint': 40.21, u'apparentTemperatureMax': 58.3, u'temperatureMax': 58.3, u'temperatureMaxTime': 1424041200, u'windBearing': 44, u'moonPhase': 0.88, u'visibility': 8.63, u'sunsetTime': 1424050703, u'pressure': 1025.91, u'precipProbability': 0, u'apparentTemperatureMin': 39.94, u'precipIntensityMax': 0, u'icon': u'partly-cloudy-night', u'apparentTemperatureMaxTime': 1424041200, u'humidity': 0.77, u'ozone': 321.2, u'windSpeed': 4.16, u'time': 1423987200, u'precipIntensity': 0, u'sunriseTime': 1424013252, u'temperatureMinTime': 1424012400}, {u'apparentTemperatureMinTime': 1424098800, u'cloudCover': 0.15, u'temperatureMin': 41.38, u'summary': u'Partly cloudy starting in the evening.', u'dewPoint': 34.1, u'apparentTemperatureMax': 55.95, u'temperatureMax': 55.95, u'temperatureMaxTime': 1424124000, u'windBearing': 83, u'moonPhase': 0.92, u'visibility': 9.9, u'sunsetTime': 1424137190, u'pressure': 1023.6, u'precipProbability': 0, u'apparentTemperatureMin': 35.81, u'precipIntensityMax': 0, u'icon': u'partly-cloudy-night', u'apparentTemperatureMaxTime': 1424124000, u'humidity': 0.6, u'ozone': 313.44, u'windSpeed': 10.56, u'time': 1424073600, u'precipIntensity': 0, u'sunriseTime': 1424099559, u'temperatureMinTime': 1424095200}, {u'apparentTemperatureMinTime': 1424181600, u'cloudCover': 0.33, u'temperatureMin': 40.09, u'summary': u'Partly cloudy until afternoon.', u'dewPoint': 35.09, u'apparentTemperatureMax': 59.34, u'temperatureMax': 59.34, u'temperatureMaxTime': 1424214000, u'windBearing': 91, u'moonPhase': 0.95, u'visibility': 10, u'sunsetTime': 1424223677, u'pressure': 1022.08, u'precipProbability': 0, u'apparentTemperatureMin': 33.67, u'precipIntensityMax': 0, u'icon': u'partly-cloudy-day', u'apparentTemperatureMaxTime': 1424214000, u'humidity': 0.61, u'ozone': 302.52, u'windSpeed': 8.39, u'time': 1424160000, u'precipIntensity': 0, u'sunriseTime': 1424185865, u'temperatureMinTime': 1424181600}, {u'apparentTemperatureMinTime': 1424271600, u'precipType': u'rain', u'cloudCover': 0.64, u'precipIntensityMaxTime': 1424293200, u'temperatureMin': 40.47, u'summary': u'Mostly cloudy throughout the day.', u'dewPoint': 42.59, u'apparentTemperatureMax': 50.9, u'temperatureMax': 50.9, u'temperatureMaxTime': 1424307600, u'windBearing': 173, u'moonPhase': 0.99, u'visibility': 10, u'sunsetTime': 1424310164, u'pressure': 1025.77, u'precipProbability': 0.01, u'apparentTemperatureMin': 39.01, u'precipIntensityMax': 0.0018, u'icon': u'partly-cloudy-day', u'apparentTemperatureMaxTime': 1424307600, u'humidity': 0.86, u'ozone': 324.55, u'windSpeed': 1.83, u'time': 1424246400, u'precipIntensity': 0.0009, u'sunriseTime': 1424272170, u'temperatureMinTime': 1424268000}, {u'apparentTemperatureMinTime': 1424358000, u'precipType': u'rain', u'cloudCover': 0.44, u'precipIntensityMaxTime': 1424394000, u'temperatureMin': 35.94, u'summary': u'Partly cloudy throughout the day.', u'dewPoint': 42.16, u'apparentTemperatureMax': 55.82, u'temperatureMax': 55.82, u'temperatureMaxTime': 1424386800, u'windBearing': 322, u'moonPhase': 0.03, u'sunsetTime': 1424396650, u'pressure': 1025.9, u'precipProbability': 0.03, u'apparentTemperatureMin': 35.94, u'precipIntensityMax': 0.0029, u'icon': u'partly-cloudy-day', u'apparentTemperatureMaxTime': 1424386800, u'humidity': 0.9, u'ozone': 331.71, u'windSpeed': 0.69, u'time': 1424332800, u'precipIntensity': 0.0018, u'sunriseTime': 1424358473, u'temperatureMinTime': 1424358000}, {u'apparentTemperatureMinTime': 1424440800, u'precipType': u'rain', u'cloudCover': 0.2, u'precipIntensityMaxTime': 1424476800, u'temperatureMin': 35.7, u'summary': u'Partly cloudy until evening.', u'dewPoint': 42.89, u'apparentTemperatureMax': 57.07, u'temperatureMax': 57.07, u'temperatureMaxTime': 1424473200, u'windBearing': 341, u'moonPhase': 0.07, u'sunsetTime': 1424483136, u'pressure': 1025.47, u'precipProbability': 0.05, u'apparentTemperatureMin': 35.7, u'precipIntensityMax': 0.0046, u'icon': u'partly-cloudy-day', u'apparentTemperatureMaxTime': 1424473200, u'humidity': 0.89, u'ozone': 336.78, u'windSpeed': 1.88, u'time': 1424419200, u'precipIntensity': 0.0036, u'sunriseTime': 1424444776, u'temperatureMinTime': 1424440800}, {u'apparentTemperatureMinTime': 1424527200, u'precipType': u'rain', u'cloudCover': 0.41, u'precipIntensityMaxTime': 1424505600, u'temperatureMin': 37.99, u'summary': u'Partly cloudy throughout the day.', u'dewPoint': 42.17, u'apparentTemperatureMax': 61.02, u'temperatureMax': 61.02, u'temperatureMaxTime': 1424559600, u'windBearing': 45, u'moonPhase': 0.11, u'sunsetTime': 1424569622, u'pressure': 1024.57, u'precipProbability': 0.05, u'apparentTemperatureMin': 37.99, u'precipIntensityMax': 0.0034, u'icon': u'partly-cloudy-day', u'apparentTemperatureMaxTime': 1424559600, u'humidity': 0.79, u'ozone': 343.74, u'windSpeed': 3.21, u'time': 1424505600, u'precipIntensity': 0.002, u'sunriseTime': 1424531077, u'temperatureMinTime': 1424527200}, {u'apparentTemperatureMinTime': 1424613600, u'cloudCover': 0.26, u'temperatureMin': 40.15, u'summary': u'Partly cloudy until evening.', u'dewPoint': 41.29, u'apparentTemperatureMax': 63.06, u'temperatureMax': 63.06, u'temperatureMaxTime': 1424646000, u'windBearing': 62, u'moonPhase': 0.14, u'sunsetTime': 1424656107, u'pressure': 1023.96, u'precipProbability': 0, u'apparentTemperatureMin': 37.89, u'precipIntensityMax': 0, u'icon': u'partly-cloudy-day', u'apparentTemperatureMaxTime': 1424646000, u'humidity': 0.72, u'ozone': 336.89, u'windSpeed': 4.25, u'time': 1424592000, u'precipIntensity': 0, u'sunriseTime': 1424617377, u'temperatureMinTime': 1424613600}], u'summary': u'No precipitation throughout the week, with temperatures bottoming out at 51\xb0F on Wednesday.'}, u'offset': -8, u'latitude': 45.52, u'timezone': u'America/Los_Angeles', u'minutely': {u'icon': u'clear-day', u'data': [{u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027460}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027520}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027580}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027640}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027700}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027760}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027820}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027880}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424027940}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028000}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028060}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028120}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028180}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028240}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028300}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028360}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028420}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028480}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028540}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028600}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028660}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028720}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028780}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028840}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028900}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424028960}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029020}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029080}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029140}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029200}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029260}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029320}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029380}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029440}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029500}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029560}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029620}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029680}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029740}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029800}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029860}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029920}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424029980}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030040}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030100}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030160}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030220}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030280}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030340}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030400}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030460}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030520}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030580}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030640}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030700}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030760}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030820}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030880}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424030940}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424031000}, {u'precipIntensity': 0, u'precipProbability': 0, u'time': 1424031060}], u'summary': u'Clear for the hour.'}}


class LineChartConfig(pygal.Config):
    """Customized configuration class for charts."""
    interpolate = 'hermite'
    interpolation_parameters = {'type': 'finite_difference'}
    width = 900
    height = 400
    show_only_major_dots = True
    legend_at_bottom = True
    fill = True
    pretty_print = True


class Line(object):
    """Data about one line to be used when creating a line chart.

    Args:
        data_dict (dict): JSON weather data from Forecast.icon
        data_key (str): Name of weather value wanted out of data_dict
        time_frame (str): Time granularity of the JSON weather data.
        print_name (str): Display name for the weather value
        secondary (bool): Use secondary y axis?

    Atributes:
        self.data (list): Data points from the data_key in time_frame
            granularity.
        self.name (str): Key name of data points.
        self.print_name (str): Name to print on chart (defaults to name)
        self.secondary (bool): Use secondary y axis?
    """
    def __init__(self, data_dict, data_key, time_frame='hourly',
                 print_name=None, secondary=False):

        # Parse data_dict and assign list of data points to self.data
        try:
            data_block = data_dict[time_frame]['data']
        except IndexError:
            raise IndexError("Error. No weather data for %s time frame."
                             % time_frame)
        try:
            self.data = [chunk[data_key] for chunk in data_block]
        except IndexError:
            raise IndexError("Error. JSON data bock %s does not have %s key."
                             % (data_block, data_key))

        self.name = data_key
        if print_name:
            self.print_name = print_name
        else:
            self.print_name = self.name
        self.secondary = secondary


def create_chart(line_list):
    """Returns an pygal chart created from a list of Line objects."""
    chart = pygal.Line(LineChartConfig())
    min_max_index = []

    for line in line_list:
        chart.add(line.name, line.data, secondary=line.secondary)

        # Index of min and max values for each line
        for i, j in enumerate(line.data):
            if j == min(line.data) or j == max(line.data):
                min_max_index.append(str(i))
        chart.x_labels = map(str, range(len(line.data)))

    # Only show min and max value dots
    chart.x_labels_major = min_max_index

    return chart

if __name__ == '__main__':
    def save_svg(metrics):
        """For testing. Save svg to local file"""
        line_list = []
        file_name = ""
        for metric, sec_bool in metrics:
            line_list.append(Line(TEST_JSON, metric, secondary=sec_bool))
            file_name += metric + '-'
        chart = create_chart(line_list)
        file_name += 'chart.svg'
        chart.render_to_file(file_name)

    # Test case 1 - % based metrics
    save_svg([('precipProbability', False), ('cloudCover', False)])

    # Test case 2 - 4 metrics
    save_svg([
        ('precipProbability', False),
        ('cloudCover', False),
        ('temperature', True),
        ('windSpeed', True)
        ])

    # Test case 3 - 2 different scales
    save_svg([('humidity', False), ('pressure', True)])
